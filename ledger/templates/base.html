{% load static %}

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>{% block title %}Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ{% endblock %}</title>

  <!-- ÙÙˆÙ†Øª ÙØ§Ø±Ø³ÛŒ Ù…Ø¯Ø±Ù† -->
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">

  <!-- Bootstrap RTL ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ layout Ùˆ Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

  <!-- jQuery Ùˆ Select2 -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <!-- Ø§Ø³ØªØ§ÛŒÙ„ Ú©Ù„ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ - Ø§Ù„Ø§Ù† Ù‡Ù…Ù‡ Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯Ø± styles.css ÛŒÚ©ÛŒ Ù…ÛŒâ€ŒØ´Ù† -->
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>

<body>
  <!-- Toast / Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ -->
  <div id="notify-container" class="notify-container" aria-live="polite" aria-atomic="true"></div>

  <!-- Ù†ÙˆØ§Ø± Ø¨Ø§Ù„Ø§ÛŒÛŒ Ø³Ø§ÛŒØª -->
  <nav class="navbar">
    <div class="navbar-brand">Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ Ø´Ø®ØµÛŒ</div>

    <div class="hamburger" id="hamburger">
      <div></div>
      <div></div>
      <div></div>
    </div>

    <div class="navbar-menu" id="menu">
      <a href="{% url 'register_sell' %}">Ø«Ø¨Øª ÙØ±ÙˆØ´</a>
      <a href="{% url 'register_purchase' %}">Ø«Ø¨Øª Ø®Ø±ÛŒØ¯</a>
      <a href="{% url 'register_receipt' %}">Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¬Ù‡</a>
      <a href="{% url 'register_payment' %}">Ù¾Ø±Ø¯Ø§Ø®Øª ÙˆØ¬Ù‡</a>
      <a href="{% url 'items_list' %}">Ú©Ø§Ù„Ø§Ù‡Ø§</a>
      <a href="{% url 'parties_list' %}">Ø·Ø±Ù Ø­Ø³Ø§Ø¨â€ŒÙ‡Ø§</a>
      <a href="{% url 'transaction_list' %}">ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</a>
      <a href="{% url 'customer_balance_report' %}">Ù…Ø´ØªØ±ÛŒØ§Ù†</a>
      <a href="{% url 'monthly_sales' %}">ğŸ“Š ÙØ±ÙˆØ´ Ù…Ø§Ù‡Ø§Ù†Ù‡</a>

      {% if user.is_authenticated %}
        <a href="{% url 'logout' %}">Ø®Ø±ÙˆØ¬</a>
      {% else %}
        <a href="{% url 'login' %}">ÙˆØ±ÙˆØ¯</a>
      {% endif %}
    </div>
  </nav>

  <!-- Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ù‡ -->
  <div id="page-root" class="main-container hide-until-ready">
    {% block content %}{% endblock %}
  </div>

  <!-- Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ø´ÙˆÙ†Ø¯Ù‡ -->
  {% include "partials/modals.html" %}

  <!-- Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ø®ØµÙˆØµ Ù‡Ø± ØµÙØ­Ù‡ (Ø§Ú¯Ø± ØµÙØ­Ù‡ block scripts Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯) -->
  {% block scripts %}{% endblock %}

  <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ -->
  <script src="{% static 'js/app.js' %}"></script>
  <script src="{% static 'js/modals.js' %}"></script>
  <script src="{% static 'js/notify.js' %}"></script>
  <script src="{% static 'js/numbers.js' %}"></script>

  <!-- Bootstrap Bundle (dropdown Ù‡Ø§ Ùˆ ... Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Django -->
  {% if messages %}
  <script>
    window.addEventListener('DOMContentLoaded', function(){
      {% for message in messages %}
        if (window.notify) {
          window.notify('{{ message.tags|default:"info" }}', "{{ message|escapejs }}");
        }
      {% endfor %}
    });
  </script>
  {% endif %}

  <!-- Ú©Ù†ØªØ±Ù„ Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ + Ø­Ø°Ù Ù…Ø®ÙÛŒ Ø¨ÙˆØ¯Ù† ØµÙØ­Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ù„ÙˆØ¯ -->
  <script>
    (function(){
      const hamburger = document.getElementById('hamburger');
      const menu = document.getElementById('menu');
      if (hamburger && menu) {
        hamburger.addEventListener('click', () => {
          menu.classList.toggle('show');
        });
      }

      // fallback Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø¯Ø§Ø´ØªÙ† hide-until-ready
      window.requestAnimationFrame(() => {
        const root = document.getElementById('page-root');
        if (root) root.classList.remove('hide-until-ready');
      });
    })();
  </script>
</body>
</html>
